<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
            content="width=divice-width, user-scalable=no, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatable" content="ie=edge">
        <link rel="stylesheet" href="css/ajax-blog.css">
    </head>
    <body>
        <header>
        </header>
        <main id="posts" class="container">
          <article>
            <div class="blog-title row-86">
              <div class="column col-10"></div>
              <div class="column col-80">
                <h3>Title</h3>
              </div>
              <div class="column col-10"></div>
            </div>
            <div class="blog-tags row-32">
              <div class="column col-10"></div>
              <div class="column col-80">
                category A, category B, category C, category D,
              </div>
              <div class="column col-10"></div>
            </div>
            <div class="blog-date row-32">
              <div class="column col-10"></div>
              <div class="column col-80">01/01/2018</div>
              <div class="column col-10"></div>
            </div>
            <div class="blog-content row-256">
              <div class="column col-10"></div>
              <div class="column col-80">
                <p>This is where the text of each article ought to go. So, we'll use
                this template as an example and see where we can go from here.
                Don't forget to use paragraph tags to seperate everything. I'll
                probably also want to generate a bunch of text... so I'll need to
                get my own lorem ipsum thing going on. That all seems pretty
                straight forward.</p>
              </div>
              <div class="column col-10"></div>
            </div>
          </article>

          <form class="container" action="/updateblog.html" method="post">
            <div class="row-64">
              <div class="column col-25"></div>
              <div class="column col-25">
                <h6>Title</h6>
              </div>
              <div class="column col-50">
                <input type="text" name="title"></input>
              </div>
            </div>
            <div class="row-64">
              <div class="column col-25"></div>
              <div class="column col-25">
                <h6>Tags</h6>
              </div>
              <div class="column col-50">
                <input type="text" name="categories"></input>
              </div>
            </div>
            <div class="row-64">
              <div class="column col-25"></div>
              <div class="column col-25">
                <h6>Date</h6>
              </div>
              <div class="column col-50">
                <input type="text" name="date"></input>
              </div>
            </div>
            <div class="row-64">
              <div class="column col-50">
                <textarea name="content" rows="10" cols="50">Blog post content goes here...</textarea>
              </div>
              <div class="column col-50">
                <input type="submit"></input>
              </div>
            </div>
          </form>
        </main>
        <footer>
        </footer>
        <script src="node_modules/jquery/dist/jquery.js"></script>
        <script>
          /*
          COMPLETE: Create a new html file called ajax-blog.html.
          */

          /*
          COMPLETE: At minimum, your ajax blog will need an empty <div> with an id of posts.
          */

          /*
          COMPLETEish: Add your own Bootstrap theme to this file as well. Feel free to use the same one as your store or choose a different one.
          */

          /*
          COMPLETE: Download blog.json to your data directory from before.
          */

          /*
          TODO: Use ajax to load the contents of blog.json and add the data from it to your #posts div.
          */
          function jsonToBlog(array){
            var strTitle = "";
            var strCategories = "";
            var strDate = "";
            var strContent = "";

            array.forEach(function(elem){
              console.log(elem.content);
              strTitle +=
              "<div class=\"blog-title row-86\">" +
                "<div class=\"column col-10\"></div>" +
                "<div class=\"column col-80\">" +
                  "<h3>" + elem.title + "</h3>" +
                "</div>" +
                "<div class=\"column col-10\"></div>" +
              "</div>";
              strCategories +=
              "<div class=\"blog-tags row-32\">" +
                "<div class=\"column col-10\"></div>" +
                "<div class=\"column col-80\">" +
                  elem.categories.join(" ") +
                "</div>" +
                "<div class=\"column col-10\"></div>" +
              "</div>";
              strDate +=
              "<div class=\"blog-date row-32\">"
                "<div class=\"column col-10\"></div>"
                "<div class=\"column col-80\">" + elem.date + "</div>"
                "<div class=\"column col-10\"></div>"
              "</div>"
              strContent +=
              "<div class=\"blog-content row-256\">" +
                "<div class=\"column col-10\"></div>" +
                "<div class=\"column col-80\">" +
                  elem.content +
                "</div>" +
                "<div class=\"column col-10\"></div>" +
              "</div>";
              $("article").append(strTitle + strCategories + strDate + strContent);
              strTitle = "";
              strCategories = "";
              strDate = "";
              strCategories = "";
            });
          }

          $.ajax({
              url: "data/blog.json",
              type: "GET",
            }).done(function(data, status){
              console.log(status);
              //console.log(data);
              jsonToBlog(data);
          });
          /*
          TODO: Add additional entries to blog.json and make sure your changes are reflected on the page.
          */
        </script>
    </body>
</html>
